// Internationalization System
let currentLanguage = 'fr';

// Translations embedded directly
const translations = {
    "fr": {
        "nav": {
            "home": "Accueil",
            "about": "√Ä propos",
            "stats": "Statistiques",
            "join": "Rejoindre"
        },
        "hero": {
            "title": "üíé Rejoignez PI Network - avec Rodriguez",
            "subtitle": "Minez la premi√®re crypto-monnaie gratuite sur votre t√©l√©phone mobile - 47M+ pionniers dans le monde",
            "cta": "Commencer maintenant"
        },
        "about": {
            "title": "Qu'est-ce que PI crypto ?",
            "features": {
                "mobile": {
                    "title": "Minage Mobile",
                    "description": "Minez des PI coins directement depuis votre smartphone sans drainer votre batterie ni consommer vos donn√©es."
                },
                "community": {
                    "title": "Communaut√© Mondiale",
                    "description": "Rejoignez plus de 47 millions de pionniers dans le monde entier qui construisent l'√©cosyst√®me PI."
                },
                "secure": {
                    "title": "S√©curis√©",
                    "description": "D√©velopp√© par des docteurs de Stanford avec un protocole de consensus innovant et s√©curis√©."
                },
                "free": {
                    "title": "Gratuit",
                    "description": "Commencez √† miner gratuitement d√®s aujourd'hui. Aucun investissement initial requis."
                },
                "growth": {
                    "title": "Potentiel de Croissance",
                    "description": "Entrez t√¥t dans l'√©cosyst√®me avant le lancement officiel sur les exchanges."
                },
                "referral": {
                    "title": "Parrainage",
                    "description": "Gagnez plus de PI en invitant vos amis et en construisant votre r√©seau de s√©curit√©."
                }
            }
        },
        "stats": {
            "title": "PI crypto en Chiffres",
            "pioneers": "Pionniers Actifs",
            "countries": "Pays Repr√©sent√©s",
            "apps": "Applications D√©velopp√©es",
            "launch": "Ann√©e de Lancement"
        },
        "steps": {
            "title": "Comment Rejoindre PI crypto",
            "step1": {
                "title": "T√©l√©chargez l'App",
                "description": "T√©l√©chargez l'application PI crypto depuis l'App Store ou Google Play Store."
            },
            "step2": {
                "title": "Utilisez mon Code",
                "description": "Lors de l'inscription, utilisez mon code de parrainage : Rodriguez003"
            },
            "step3": {
                "title": "Commencez √† Miner",
                "description": "Appuyez sur le bouton de minage une fois par jour pour commencer √† gagner des PI coins."
            },
            "step4": {
                "title": "Invitez vos Amis",
                "description": "Partagez votre propre code de parrainage pour augmenter votre taux de minage."
            },
            "qr": {
                "title": "Ou scannez ce QR Code :",
                "description": "Scannez avec votre t√©l√©phone pour acc√©der directement au lien d'inscription"
            }
        },
        "footer": {
            "copyright": "¬© 2024 PI crypto - Rejoignez la r√©volution crypto avec Rodriguez003",
            "disclaimer": "‚ö†Ô∏è PI crypto est encore en phase de d√©veloppement. Les PI coins n'ont pas encore de valeur mon√©taire."
        }
    },
    "en": {
        "nav": {
            "home": "Home",
            "about": "About",
            "stats": "Statistics",
            "join": "Join"
        },
        "hero": {
            "title": "üíé Join PI Network - with Rodriguez",
            "subtitle": "Mine the first free cryptocurrency on your mobile phone - 47M+ pioneers worldwide",
            "cta": "Start Now"
        },
        "about": {
            "title": "What is PI crypto?",
            "features": {
                "mobile": {
                    "title": "Mobile Mining",
                    "description": "Mine PI coins directly from your smartphone without draining your battery or consuming your data."
                },
                "community": {
                    "title": "Global Community",
                    "description": "Join over 47 million pioneers worldwide who are building the PI ecosystem."
                },
                "secure": {
                    "title": "Secure",
                    "description": "Developed by Stanford PhDs with an innovative and secure consensus protocol."
                },
                "free": {
                    "title": "Free",
                    "description": "Start mining for free today. No initial investment required."
                },
                "growth": {
                    "title": "Growth Potential",
                    "description": "Get in early in the ecosystem before the official launch on exchanges."
                },
                "referral": {
                    "title": "Referral",
                    "description": "Earn more PI by inviting your friends and building your security crypto."
                }
            }
        },
        "stats": {
            "title": "PI crypto in Numbers",
            "pioneers": "Active Pioneers",
            "countries": "Countries Represented",
            "apps": "Apps Developed",
            "launch": "Launch Year"
        },
        "steps": {
            "title": "How to Join PI crypto",
            "step1": {
                "title": "Download the App",
                "description": "Download the PI crypto app from the App Store or Google Play Store."
            },
            "step2": {
                "title": "Use my Code",
                "description": "When signing up, use my referral code: Rodriguez003"
            },
            "step3": {
                "title": "Start Mining",
                "description": "Tap the mining button once a day to start earning PI coins."
            },
            "step4": {
                "title": "Invite your Friends",
                "description": "Share your own referral code to increase your mining rate."
            },
            "qr": {
                "title": "Or scan this QR Code:",
                "description": "Scan with your phone to directly access the registration link"
            }
        },
        "footer": {
            "copyright": "¬© 2024 PI crypto - Join the crypto revolution with Rodriguez003",
            "disclaimer": "‚ö†Ô∏è PI crypto is still in development phase. PI coins do not yet have monetary value."
        }
    },
    "es": {
        "nav": {
            "home": "Inicio",
            "about": "Acerca de",
            "stats": "Estad√≠sticas",
            "join": "Unirse"
        },
        "hero": {
            "title": "üíé √önete a PI Network - con Rodriguez",
            "subtitle": "Mina la primera criptomoneda gratuita en tu tel√©fono m√≥vil - 47M+ pioneros en el mundo",
            "cta": "Comenzar Ahora"
        },
        "about": {
            "title": "¬øQu√© es PI crypto?",
            "features": {
                "mobile": {
                    "title": "Miner√≠a M√≥vil",
                    "description": "Mina monedas PI directamente desde tu smartphone sin agotar tu bater√≠a ni consumir tus datos."
                },
                "community": {
                    "title": "Comunidad Global",
                    "description": "√önete a m√°s de 47 millones de pioneros en todo el mundo que est√°n construyendo el ecosistema PI."
                },
                "secure": {
                    "title": "Seguro",
                    "description": "Desarrollado por doctores de Stanford con un protocolo de consenso innovador y seguro."
                },
                "free": {
                    "title": "Gratis",
                    "description": "Comienza a minar gratis hoy. No se requiere inversi√≥n inicial."
                },
                "growth": {
                    "title": "Potencial de Crecimiento",
                    "description": "Entra temprano en el ecosistema antes del lanzamiento oficial en los exchanges."
                },
                "referral": {
                    "title": "Referidos",
                    "description": "Gana m√°s PI invitando a tus amigos y construyendo tu red de seguridad."
                }
            }
        },
        "stats": {
            "title": "PI crypto en N√∫meros",
            "pioneers": "Pioneros Activos",
            "countries": "Pa√≠ses Representados",
            "apps": "Aplicaciones Desarrolladas",
            "launch": "A√±o de Lanzamiento"
        },
        "steps": {
            "title": "C√≥mo Unirse a PI crypto",
            "step1": {
                "title": "Descarga la App",
                "description": "Descarga la aplicaci√≥n PI crypto desde la App Store o Google Play Store."
            },
            "step2": {
                "title": "Usa mi C√≥digo",
                "description": "Al registrarte, usa mi c√≥digo de referido: Rodriguez003"
            },
            "step3": {
                "title": "Comienza a Minar",
                "description": "Toca el bot√≥n de miner√≠a una vez al d√≠a para comenzar a ganar monedas PI."
            },
            "step4": {
                "title": "Invita a tus Amigos",
                "description": "Comparte tu propio c√≥digo de referido para aumentar tu tasa de miner√≠a."
            },
            "qr": {
                "title": "O escanea este C√≥digo QR:",
                "description": "Escanea con tu tel√©fono para acceder directamente al enlace de registro"
            }
        },
        "footer": {
            "copyright": "¬© 2024 PI crypto - √önete a la revoluci√≥n crypto con Rodriguez003",
            "disclaimer": "‚ö†Ô∏è PI crypto a√∫n est√° en fase de desarrollo. Las monedas PI a√∫n no tienen valor monetario."
        }
    }
};

// Initialize translations
function initTranslations() {
    // Get saved language or use browser language
    const savedLang = localStorage.getItem('picrypto-language');
    const browserLang = navigator.language.substring(0, 2);
    currentLanguage = savedLang || (translations[browserLang] ? browserLang : 'fr');
    
    // Set language selector
    const languageSelect = document.getElementById('languageSelect');
    if (languageSelect) {
        languageSelect.value = currentLanguage;
    }
    
    // Apply translations
    applyTranslations();
}

// Apply translations to the page
function applyTranslations() {
    const elements = document.querySelectorAll('[data-translate]');
    
    elements.forEach(element => {
        const key = element.getAttribute('data-translate');
        const translation = getNestedTranslation(translations[currentLanguage], key);
        if (translation) {
            element.textContent = translation;
        }
    });
    
    // Update document language
    document.documentElement.lang = currentLanguage;
    
    // Update page title
    const titles = {
        'fr': 'PI crypto - Rejoignez la R√©volution Crypto üöÄ',
        'en': 'PI crypto - Join the Crypto Revolution üöÄ',
        'es': 'PI crypto - √önete a la Revoluci√≥n Crypto üöÄ'
    };
    document.title = titles[currentLanguage];
}

// Get nested translation value
function getNestedTranslation(obj, path) {
    return path.split('.').reduce((current, key) => current && current[key], obj);
}

// Language selector event
document.addEventListener('DOMContentLoaded', () => {
    // Initialize translations first
    initTranslations();
    
    // Initialize QR Code
    setTimeout(initQRCode, 100);
    
    // Setup language selector
    const languageSelect = document.getElementById('languageSelect');
    
    if (languageSelect) {
        languageSelect.addEventListener('change', (e) => {
            currentLanguage = e.target.value;
            localStorage.setItem('picrypto-language', currentLanguage);
            applyTranslations();
            updateCopyMessage();
        });
    }
    
    // Force initial translation after a small delay
    setTimeout(() => {
        applyTranslations();
    }, 200);
});

// Update copy message based on language
function updateCopyMessage() {
    const copyMessages = {
        'fr': 'Code copi√© ! ‚úÖ',
        'en': 'Code copied! ‚úÖ',
        'es': '¬°C√≥digo copiado! ‚úÖ'
    };
    window.copyMessage = copyMessages[currentLanguage];
}

// Initialize QR Code after DOM is loaded
function initQRCode() {
    const qrElement = document.getElementById('qrcode');
    if (qrElement) {
        const qr = new QRious({
            element: qrElement,
            value: 'https://minepi.com/Rodriguez003',
            size: 200,
            background: 'white',
            foreground: '#e94560'
        });
    }
}

// Smooth Scrolling
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    });
});

// Fade in Animation on Scroll
const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
};

const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            entry.target.classList.add('visible');
        }
    });
}, observerOptions);

document.querySelectorAll('.fade-in').forEach(el => {
    observer.observe(el);
});

// Navbar scroll effect
window.addEventListener('scroll', () => {
    const nav = document.querySelector('nav');
    if (window.scrollY > 100) {
        nav.style.background = 'rgba(255, 255, 255, 0.98)';
        nav.style.boxShadow = '0 2px 20px rgba(0, 0, 0, 0.1)';
    } else {
        nav.style.background = 'rgba(255, 255, 255, 0.95)';
        nav.style.boxShadow = 'none';
    }
});

// Copy referral code functionality
document.querySelector('.referral-code').addEventListener('click', function() {
    navigator.clipboard.writeText('Rodriguez003').then(() => {
        const originalText = this.textContent;
        const copyMessage = window.copyMessage || 'Code copi√© ! ‚úÖ';
        this.textContent = copyMessage;
        setTimeout(() => {
            this.textContent = originalText;
        }, 2000);
    });
});
